<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Broadcast Example</title>
    <meta name="description" content="">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.pubnub.com/pubnub.min.js"></script>
    <script src="http://pubnub.github.io/angular-js/scripts/pubnub-angular.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  </head>
  <body ng-app="broadcastApp">
    <div ng-controller="BcCtrl">
      <div class="container">
        <h1>Sensor Provider - Add Page</h1>
        <form class="form-horizontal">
          <legend></legend>
          <div class="form-group">
            <!-- Lat Inc -->
            <label class="col-sm-2 control-label">Sensor Name</label>
            <div class="col-sm-2">
              <input type="" class="form-control" ng-model="SensorName">
            </div>
          </div>
          <div class="form-group">
            <!-- Long Inc -->
            <label class="col-sm-2 control-label">Sensor Type</label>
            <div class="col-sm-2">
              <input type="" class="form-control" ng-model="SensorType">
            </div>
          </div>
          <div class="form-group">
            <!-- Delay -->
            <label class="col-sm-2 control-label">Add to Bus</label>
            <div class="col-sm-2">
              <input type="" class="form-control" ng-model="HostVehicleID">
            </div>
          </div>
          <div class="form-group">
            <!-- Start Btn -->
            <label class="col-sm-2 control-label"></label> 
            <div class="col-sm-2">
              <br>
              <a ng-disabled="isDisabled" class="btn btn-primary" ng-click="SendData()">Add</a>
            </div>
          </div>
          </div>
        </form>
        <div class="container">
          <a href="/test/gmap">Google Maps Example</a>
        </div>
      </div>
    </div>
    
    <!--POST method -->
    <script>
    var app = angular.module("broadcastApp", []);
    app.controller("BcCtrl", function ($scope, $http) {

        $scope.SendData = function () {
            
            var data = JSON.stringify({
                SensorName: $scope.SensorName,
                SensorType: parseInt($scope.SensorType, 10),
                HostVehicleID: $scope.HostVehicleID
            });
        
            var config = {
                headers : {
                    'Content-Type': 'application/json;'
                }
            }

            $http.post('/api/addSensor', data, config)
            .success(function (data, status, headers, config) {
                $scope.PostDataResponse = data;
            })
            .error(function (data, status, header, config) {
                $scope.ResponseDetails = "Data: " + data +
                    "<hr />status: " + status +
                    "<hr />headers: " + header +
                    "<hr />config: " + config;
            });
        };

      });
    </script>
  </body>
</html>

